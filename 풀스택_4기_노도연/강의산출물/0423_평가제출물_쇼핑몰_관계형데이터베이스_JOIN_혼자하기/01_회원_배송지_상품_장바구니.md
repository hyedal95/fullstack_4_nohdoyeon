# 회원, 배송지, 상품, 장바구니
- DB : shop_mall
```SQL
CREATE DATABASE shop_mall;
USE shop_mall;
SHOW DATABASES;
SHOW TABLES;
```

1. 회원
    - ENGINE =`INNODB` CHARSET=`UTF8MB4`
    `아이디` VARCHAR(16) NOT NULL, PK
    `비밀번호` VARCHAR(16) NOT NULL,
    `이름` VARCHAR(30) NOT NULL,
    `휴대폰` VARCHAR(13) NOT NULL,
    `이메일` VARCHAR(200) NULL,
    `생년월일` VARCHAR(10) NULL,
    `등록일` TIMESTAMP  DEFAULT NOW() NOT NULL,
    PRIMARY KEY (`아이디`)

```SQL
CREATE TABLE 회원(
    `아이디` VARCHAR(16) NOT NULL,  
    `비밀번호` VARCHAR(16) NOT NULL,
    `이름` VARCHAR(30) NOT NULL,
    `휴대폰` VARCHAR(13) NOT NULL,
    `이메일` VARCHAR(200) NULL,
    `생년월일` VARCHAR(10) NULL,
    `등록일` TIMESTAMP  DEFAULT NOW() NOT NULL,
    PRIMARY KEY (`아이디`)
) ENGINE =`INNODB` CHARSET=`UTF8MB4`;

+--------------+--------------+------+-----+---------------------+-------+
| Field        | Type         | Null | Key | Default             | Extra |
+--------------+--------------+------+-----+---------------------+-------+
| 아이디       | varchar(16)  | NO   | PRI | NULL                |       |
| 비밀번호     | varchar(16)  | NO   |     | NULL                |       |
| 이름         | varchar(30)  | NO   |     | NULL                |       |
| 휴대폰       | varchar(13)  | NO   |     | NULL                |       |
| 이메일       | varchar(200) | YES  |     | NULL                |       |
| 생년월일     | varchar(10)  | YES  |     | NULL                |       |
| 등록일       | timestamp    | NO   |     | current_timestamp() |       |
+--------------+--------------+------+-----+---------------------+-------+
-- 데이터 입력 5개
INSERT INTO 회원(아이디,비밀번호,이름,휴대폰,이메일,생년월일) VALUES 
('doyeon1','1234','김대한','010-4515-9751','doyeon1@gmail.com','1994-08-15'),
('doyeon2','1234','최민국','010-7801-8744','doyeon2@gmail.com','1979-09-01'),
('doyeon3','1234','박만세','010-7541-5278','doyeon3@gmail.com','1987-03-04'),
('doyeon4','1234','이지원','010-0784-2248','doyeon4@gmail.com','1996-01-03'),
('doyeon5','1234','김수현','010-5741-2768','doyeon5@gmail.com','1990-05-27');
-- 결과 SELECT * FROM 회원;
+-----------+--------------+-----------+---------------+-------------------+--------------+---------------------+
| 아이디    | 비밀번호     | 이름      | 휴대폰        | 이메일            | 생년월일     | 등록일              |
+-----------+--------------+-----------+---------------+-------------------+--------------+---------------------+
| doyeon1   | 1234         | 김대한    | 010-4515-9751 | doyeon1@gmail.com | 1994-08-15   | 2024-04-23 15:44:05 |
| doyeon2   | 1234         | 최민국    | 010-7801-8744 | doyeon2@gmail.com | 1979-09-01   | 2024-04-23 15:44:05 |
| doyeon3   | 1234         | 박만세    | 010-7541-5278 | doyeon3@gmail.com | 1987-03-04   | 2024-04-23 15:44:05 |
| doyeon4   | 1234         | 이지원    | 010-0784-2248 | doyeon4@gmail.com | 1996-01-03   | 2024-04-23 15:44:05 |
| doyeon5   | 1234         | 김수현    | 010-5741-2768 | doyeon5@gmail.com | 1990-05-27   | 2024-04-23 15:44:05 |
+-----------+--------------+-----------+---------------+-------------------+--------------+---------------------+

```

2. 배송지
    - ENGINE =`INNODB` CHARSET=`UTF8MB4`
    `idx` INT NOT NULL AUTO_INCREMENT, PK
    `아이디` VARCHAR(16) NOT NULL, FK
    `받는이이름` VARCHAR(200)  NULL,
    `받는분휴대폰` VARCHAR(200)  NULL,
    `기본배송지여부` VARCHAR(200) NOT NULL DEFAULT 'NO',
    `요청사항` VARCHAR(100) NOT NULL,
    `우편번호` VARCHAR(16) NOT NULL,
    `주소` VARCHAR(30) NOT NULL,
    `상세주소` VARCHAR(13) NOT NULL,
    `등록일` TIMESTAMP  DEFAULT NOW() NOT NULL,
    PRIMARY KEY (`idx`),
    FOREIGN KEY (`아이디`) REFERENCES 회원(`아이디`) 
```SQL
CREATE TABLE 배송지(
    `idx` INT NOT NULL AUTO_INCREMENT,
    `아이디` VARCHAR(16) NOT NULL,
    `받는이이름` VARCHAR(200)  NULL,
    `받는분휴대폰` VARCHAR(200)  NULL,
    `기본배송지여부` VARCHAR(200) NOT NULL DEFAULT 'NO',
    `요청사항` VARCHAR(100) NOT NULL DEFAULT '문 앞에 놓아주세요.',
    `우편번호` VARCHAR(16) NOT NULL,
    `주소` VARCHAR(30) NOT NULL,
    `상세주소` VARCHAR(13) NOT NULL,
    `등록일` TIMESTAMP  DEFAULT NOW() NOT NULL,
    PRIMARY KEY (`idx`),
    FOREIGN KEY (`아이디`) REFERENCES 회원(`아이디`) 
) ENGINE =`INNODB` CHARSET=`UTF8MB4`;

+-----------------------+--------------+------+-----+-----------------------------+----------------+
| Field                 | Type         | Null | Key | Default                     | Extra          |
+-----------------------+--------------+------+-----+-----------------------------+----------------+
| idx                   | int(11)      | NO   | PRI | NULL                        | auto_increment |
| 아이디                | varchar(16)  | NO   | MUL | NULL                        |                |
| 받는이이름            | varchar(200) | YES  |     | NULL                        |                |
| 받는분휴대폰          | varchar(200) | YES  |     | NULL                        |                |
| 기본배송지여부        | varchar(200) | NO   |     | NO                          |                |
| 요청사항              | varchar(100) | NO   |     | 문 앞에 놓아주세요.         |                |
| 우편번호              | varchar(16)  | NO   |     | NULL                        |                |
| 주소                  | varchar(30)  | NO   |     | NULL                        |                |
| 상세주소              | varchar(13)  | NO   |     | NULL                        |                |
| 등록일                | timestamp    | NO   |     | current_timestamp()         |                |
+-----------------------+--------------+------+-----+-----------------------------+----------------+
-- 데이터 입력 * 빽띡 ` 쓰지 말 것!! 홑따옴표 사용 할 것 
INSERT INTO 배송지(아이디,받는이이름,받는분휴대폰,기본배송지여부,요청사항,우편번호,주소,상세주소) VALUES 
('doyeon1','김민주','010-0012-6267','YES','경비실에 맡겨주세요.','12357','서울시 강남구','강남로 671'),
('doyeon1','최예나','010-8164-6267','NO','문앞에 놓아주세요.','54857','경기도 안산시','중앙로 151'),
('doyeon2','김채원','010-1126-6167','NO','경비실에 맡겨주세요.','12644','서울시 서초구','서초구 161'),
('doyeon2','히토미','010-2126-6127','YES','문앞에 놓아주세요.','78123','경기도 안산시','강남로 951'),
('doyeon2','나북희','010-3126-6127','NO','문앞에 놓아주세요.','11852','서울시 서초구','서초구 771'),
('doyeon3','권은비','010-8971-1260','YES','경비실에 맡겨주세요.','22351','서울시 강남구','강남로 871'),
('doyeon4','강혜원','010-0154-6670','NO','경비실에 맡겨주세요.','11380','서울시 강남구','강남로 471'),
('doyeon4','안유진','010-7812-1670','YES','문앞에 놓아주세요.','10357','서울시 서초구','서초로 571'),
('doyeon5','장원영','010-8467-6187','YES','경비실에 맡겨주세요.','10358','서울시 강남구','강남로 650'),
('doyeon5','김벚꽃','010-8197-8467','NO','경비실에 맡겨주세요.','25349','경기도 용인시','처인구 123'),
('doyeon5','조유리','010-1234-4627','NO','문앞에 놓아주세요.','12380','서울시 강남구','강남로 456');
-- 데이터 추가입력
INSERT INTO 배송지(아이디,받는이이름,받는분휴대폰,기본배송지여부,요청사항,우편번호,주소,상세주소) VALUES 
('doyeon1','이채연','010-9912-6557','NO','경비실에 맡겨주세요.','55557','서울시 강남구','강남로 600');
-- 출력 SELECT * FROM 배송지;
+-----+-----------+-----------------+--------------------+-----------------------+-------------------------------+--------------+---------------------+---------------+---------------------+
| idx | 아이디    | 받는이이름      | 받는분휴대폰       | 기본배송지여부        | 요청사항                      | 우편번호     | 주소                | 상세주소      | 등록일              |
+-----+-----------+-----------------+--------------------+-----------------------+-------------------------------+--------------+---------------------+---------------+---------------------+
|   1 | doyeon1   | 김민주          | 010-0012-6267      | YES                   | 경비실에 맡겨주세요.          | 12357        | 서울시 강남구       | 강남로 671    | 2024-04-23 15:55:15 |
|   2 | doyeon1   | 최예나          | 010-8164-6267      | NO                    | 문앞에 놓아주세요.            | 54857        | 경기도 안산시       | 중앙로 151    | 2024-04-23 15:55:15 |
|   3 | doyeon2   | 김채원          | 010-1126-6167      | NO                    | 경비실에 맡겨주세요.          | 12644        | 서울시 서초구       | 서초구 161    | 2024-04-23 15:55:15 |
|   4 | doyeon2   | 히토미          | 010-2126-6127      | YES                   | 문앞에 놓아주세요.            | 78123        | 경기도 안산시       | 강남로 951    | 2024-04-23 15:55:15 |
|   5 | doyeon2   | 나북희          | 010-3126-6127      | NO                    | 문앞에 놓아주세요.            | 11852        | 서울시 서초구       | 서초구 771    | 2024-04-23 15:55:15 |
|   6 | doyeon3   | 권은비          | 010-8971-1260      | YES                   | 경비실에 맡겨주세요.          | 22351        | 서울시 강남구       | 강남로 871    | 2024-04-23 15:55:15 |
|   7 | doyeon4   | 강혜원          | 010-0154-6670      | NO                    | 경비실에 맡겨주세요.          | 11380        | 서울시 강남구       | 강남로 471    | 2024-04-23 15:55:15 |
|   8 | doyeon4   | 안유진          | 010-7812-1670      | YES                   | 문앞에 놓아주세요.            | 10357        | 서울시 서초구       | 서초로 571    | 2024-04-23 15:55:15 |
|   9 | doyeon5   | 장원영          | 010-8467-6187      | YES                   | 경비실에 맡겨주세요.          | 10358        | 서울시 강남구       | 강남로 650    | 2024-04-23 15:55:15 |
|  10 | doyeon5   | 김벚꽃          | 010-8197-8467      | NO                    | 경비실에 맡겨주세요.          | 25349        | 경기도 용인시       | 처인구 123    | 2024-04-23 15:55:15 |
|  11 | doyeon5   | 조유리          | 010-1234-4627      | NO                    | 문앞에 놓아주세요.            | 12380        | 서울시 강남구       | 강남로 456    | 2024-04-23 15:55:15 |
|  12 | doyeon1   | 이채연          | 010-9912-6557      | NO                    | 경비실에 맡겨주세요.          | 55557        | 서울시 강남구       | 강남로 600    | 2024-04-23 15:57:19 |
+-----+-----------+-----------------+--------------------+-----------------------+-------------------------------+--------------+---------------------+---------------+---------------------+

-- 이너 조인
-- 아이디, 이름, 기본배송지여부, 요청사항, 우편번호, 주소 , 상세주소  목록 출력
-- 조건 아이디가 'doyeon2'

SELECT 
`배송지`.`아이디`,
`회원`.`이름` ,
`배송지`.`기본배송지여부`,
`배송지`.`요청사항`,
`배송지`.`우편번호`,
`배송지`.`주소`,
`배송지`.`상세주소`
FROM `배송지`
INNER JOIN `회원`
ON `회원`.`아이디`= `배송지`.`아이디`
WHERE `배송지`.`아이디` = 'doyeon2' AND `배송지`.`기본배송지여부` ='YES';

-- 출력 AND 추가 전, 쇼핑몰에서 한 회원이 등록한 여러 배송지 목록이 출력된다.
+-----------+-----------+-----------------------+-------------------------------+--------------+---------------------+---------------+
| 아이디    | 이름      | 기본배송지여부        | 요청사항                      | 우편번호     | 주소                | 상세주소      |
+-----------+-----------+-----------------------+-------------------------------+--------------+---------------------+---------------+
| doyeon2   | 최민국    | NO                    | 경비실에 맡겨주세요.          | 12644        | 서울시 서초구       | 서초구 161    |
| doyeon2   | 최민국    | YES                   | 문앞에 놓아주세요.            | 78123        | 경기도 안산시       | 강남로 951    |
| doyeon2   | 최민국    | NO                    | 문앞에 놓아주세요.            | 11852        | 서울시 서초구       | 서초구 771    |
+-----------+-----------+-----------------------+-------------------------------+--------------+---------------------+---------------+
-- 출력 => 아래와 같은게, 쇼핑몰에서 기본배송지 체크했을 때 나오는 모습
+-----------+-----------+-----------------------+----------------------------+--------------+---------------------+---------------+
| 아이디    | 이름      | 기본배송지여부        | 요청사항                   | 우편번호     | 주소                | 상세주소      |
+-----------+-----------+-----------------------+----------------------------+--------------+---------------------+---------------+
| doyeon2   | 최민국    | YES                   | 문앞에 놓아주세요.         | 78123        | 경기도 안산시       | 강남로 951    |
+-----------+-----------+-----------------------+----------------------------+--------------+---------------------+---------------+
```
3. 상품 => 
    - ENGINE =`INNODB` CHARSET=`UTF8MB4`
    `상품코드` VARCHAR(4) NOT NULL, PK
    `상품명` VARCHAR(100) NOT NULL,
    `상품이미지` VARCHAR(250) NOT NULL,
    `정가` INT NOT NULL,
    `할인율` DOUBLE NOT NULL DEFAULT 0.0,
    `등록일` TIMESTAMP  DEFAULT NOW() NOT NULL,
    PRIMARY KEY (`상품코드`)
```SQL
CREATE TABLE 상품(
    `상품코드` VARCHAR(4) NOT NULL,
    `상품명` VARCHAR(100) NOT NULL,
    `상품이미지` VARCHAR(250) NOT NULL,
    `정가` INT NOT NULL,
    `할인율` DOUBLE NOT NULL DEFAULT 0.0,
    `등록일` TIMESTAMP  DEFAULT NOW() NOT NULL,
    PRIMARY KEY (`상품코드`)
) ENGINE =`INNODB` CHARSET=`UTF8MB4`;

+-----------------+--------------+------+-----+---------------------+-------+
| Field           | Type         | Null | Key | Default             | Extra |
+-----------------+--------------+------+-----+---------------------+-------+
| 상품코드        | varchar(4)   | NO   | PRI | NULL                |       |
| 상품명          | varchar(100) | NO   |     | NULL                |       |
| 상품이미지      | varchar(250) | NO   |     | NULL                |       |
| 정가            | int(11)      | NO   |     | NULL                |       |
| 할인율          | double       | NO   |     | 0                   |       |
| 등록일          | timestamp    | NO   |     | current_timestamp() |       |
+-----------------+--------------+------+-----+---------------------+-------+
-- 상품 등록  식별자는 빽띡을 쓰면 파악하기 편해짐.
INSERT INTO `상품`(상품코드,상품명,상품이미지,정가,할인율) VALUES 
('A001','딸기1KG','image01.jpg','13000','0.15'),
('A002','계란1판','image02.jpg','6000','0.25'),
('A003','바나나1묶음','image03.jpg','5000','0.05'),
('A004','사과5개','image04.jpg','20000','0.10'),
('A005','키위3KG','image05.jpg','25000','0.10'),
('A006','두리안1KG','image06.jpg','50000','0.30');
-- 확인 SELECT * FROM 상품;
+--------------+------------------+-----------------+--------+-----------+---------------------+
| 상품코드     | 상품명           | 상품이미지      | 정가   | 할인율    | 등록일              |
+--------------+------------------+-----------------+--------+-----------+---------------------+
| A001         | 딸기1KG          | image01.jpg     |  13000 |      0.15 | 2024-04-23 16:40:36 |
| A002         | 계란1판          | image02.jpg     |   6000 |      0.25 | 2024-04-23 16:40:36 |
| A003         | 바나나1묶음      | image03.jpg     |   5000 |      0.05 | 2024-04-23 16:40:36 |
| A004         | 사과5개          | image04.jpg     |  20000 |       0.1 | 2024-04-23 16:40:36 |
| A005         | 키위3KG          | image05.jpg     |  25000 |       0.1 | 2024-04-23 16:40:36 |
| A006         | 두리안1KG        | image06.jpg     |  50000 |       0.3 | 2024-04-23 16:40:36 |
+--------------+------------------+-----------------+--------+-----------+---------------------+

```

4. 장바구니 => 판매가 계산할 수 있다.
    - ENGINE =`INNODB` CHARSET=`UTF8MB4`
    `idx` INT NOT NULL AUTO_INCREMENT, PK
    `아이디` VARCHAR(16) NOT NULL, FK
    `상품코드` VARCHAR(4)  NULL, FK
    `수량` INT NOT NULL DEFAULT '1',
    `등록일` TIMESTAMP  DEFAULT NOW() NOT NULL,
    PRIMARY KEY (`idx`),
    FOREIGN KEY (`아이디`) REFERENCES 회원(`아이디`),
    FOREIGN KEY (`상품코드`) REFERENCES 상품(`상품코드`)
```SQL
CREATE TABLE 장바구니(
    `idx` INT NOT NULL AUTO_INCREMENT,
    `아이디` VARCHAR(16) NOT NULL,
    `상품코드` VARCHAR(4) NOT NULL,
    `수량` INT NOT NULL DEFAULT '1',
    `등록일` TIMESTAMP  DEFAULT NOW() NOT NULL,
    PRIMARY KEY (`idx`),
    FOREIGN KEY (`아이디`) REFERENCES 회원(`아이디`),
    FOREIGN KEY (`상품코드`) REFERENCES 상품(`상품코드`)
) ENGINE =`INNODB` CHARSET=`UTF8MB4`;

+--------------+-------------+------+-----+---------------------+----------------+
| Field        | Type        | Null | Key | Default             | Extra          |
+--------------+-------------+------+-----+---------------------+----------------+
| idx          | int(11)     | NO   | PRI | NULL                | auto_increment |
| 아이디       | varchar(16) | NO   | MUL | NULL                |                |
| 상품코드     | varchar(4)  | NO   | MUL | NULL                |                |
| 수량         | int(11)     | NO   |     | 1                   |                |
| 등록일       | timestamp   | NO   |     | current_timestamp() |                |
+--------------+-------------+------+-----+---------------------+----------------+
-- `아이디` = 회원테이블 참조
-- `상품코드` = 상품테이블 참조
-- 장바구니 등록
INSERT INTO `장바구니`(아이디,상품코드,수량) VALUES 
('doyeon1','A001','1'),
('doyeon1','A003','1'),
('doyeon1','A001','1'),
('doyeon2','A003','12'),
('doyeon3','A001','1'),
('doyeon4','A002','1'),
('doyeon5','A001','3'),
('doyeon5','A005','5'),
('doyeon5','A001','1'),
('doyeon2','A004','2'),
('doyeon2','A006','1');
-- 확인  SELECT * FROM 장바구니;
+-----+-----------+--------------+--------+---------------------+
| idx | 아이디    | 상품코드     | 수량   | 등록일              |
+-----+-----------+--------------+--------+---------------------+
|   1 | doyeon1   | A001         |      1 | 2024-04-23 16:46:56 |
|   2 | doyeon1   | A003         |      1 | 2024-04-23 16:46:56 |
|   3 | doyeon1   | A001         |      1 | 2024-04-23 16:46:56 |
|   4 | doyeon2   | A003         |     12 | 2024-04-23 16:46:56 |
|   5 | doyeon3   | A001         |      1 | 2024-04-23 16:46:56 |
|   6 | doyeon4   | A002         |      1 | 2024-04-23 16:46:56 |
|   7 | doyeon5   | A001         |      3 | 2024-04-23 16:46:56 |
|   8 | doyeon5   | A005         |      5 | 2024-04-23 16:46:56 |
|   9 | doyeon5   | A001         |      1 | 2024-04-23 16:46:56 |
|  10 | doyeon2   | A004         |      2 | 2024-04-23 16:46:56 |
|  11 | doyeon2   | A006         |      1 | 2024-04-23 16:46:56 |
+-----+-----------+--------------+--------+---------------------+
-- (할인율 * 정가)*수량 => 총 상품금액 
-- 상품테이블, 장바구니테이블
-- 테이블 2개를 연결(관계) 맺는 조인 실행(LEFT 또는 INNER)
-- 장바구니에 담긴 아이디,  상품명, 정가, 수량, (할인율 * 정가)*수량 AS 총 상품금액
-- (정가 * (1-할인율)) AS 판매가

SELECT
`장바구니`.`아이디`,
`장바구니`.`상품코드`,
`상품`.`상품명`,
`상품`.`정가`,
`상품`.`할인율`,
`장바구니`.`수량`,
((`상품`.`정가`*(1-`상품`.`할인율`))) * `장바구니`.`수량` AS `판매가`
FROM `장바구니`
INNER JOIN `상품`
ON  `장바구니`.`상품코드` = `상품`.`상품코드`;
+-----------+--------------+------------------+--------+-----------+--------+-----------+
| 아이디    | 상품코드     | 상품명           | 정가   | 할인율    | 수량   | 판매가    |
+-----------+--------------+------------------+--------+-----------+--------+-----------+
| doyeon1   | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 |
| doyeon1   | A003         | 바나나1묶음      |   5000 |      0.05 |      1 |      4750 |
| doyeon1   | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 |
| doyeon2   | A003         | 바나나1묶음      |   5000 |      0.05 |     12 |     57000 |
| doyeon3   | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 |
| doyeon4   | A002         | 계란1판          |   6000 |      0.25 |      1 |      4500 |
| doyeon5   | A001         | 딸기1KG          |  13000 |      0.15 |      3 |     33150 |
| doyeon5   | A005         | 키위3KG          |  25000 |       0.1 |      5 |    112500 |
| doyeon5   | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 |
| doyeon2   | A004         | 사과5개          |  20000 |       0.1 |      2 |     36000 |
| doyeon2   | A006         | 두리안1KG        |  50000 |       0.3 |      1 |     35000 |
+-----------+--------------+------------------+--------+-----------+--------+-----------+


-- 3개 테이블 연결
-- 회원테이블 ,상품테이블, 장바구니테이블
-- 테이블 3개를 연결(관계) 맺는 조인 실행(LEFT 또는 INNER)
-- 자식 테이블을 FROM에 설정
-- 부모 테이블들을 JOIN에 설정

-- 회원 PK 아이디
-- 상품 PK 상품코드
-- 상품 FK 아이디, 상품코드


-- 장바구니에 담긴 아이디, 이름, 상품코드, 상품명, 정가, 수량,할인율, 판매가 

SELECT
`장바구니`.`아이디`,
`회원`.`이름`,
`장바구니`.`상품코드`,
`상품`.`상품명`,
`상품`.`정가`,
`상품`.`할인율`,
`장바구니`.`수량`,
((`상품`.`정가`*(1-`상품`.`할인율`))) * `장바구니`.`수량` AS `판매가`
FROM `장바구니`
INNER JOIN `상품`
ON  `장바구니`.`상품코드` = `상품`.`상품코드`
INNER JOIN `회원`
ON  `장바구니`.`아이디` = `회원`.`아이디`;
-- 출력
+-----------+-----------+--------------+------------------+--------+-----------+--------+-----------+
| 아이디    | 이름      | 상품코드     | 상품명           | 정가   | 할인율    | 수량   | 판매가    |
+-----------+-----------+--------------+------------------+--------+-----------+--------+-----------+
| doyeon1   | 김대한    | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 |
| doyeon1   | 김대한    | A003         | 바나나1묶음      |   5000 |      0.05 |      1 |      4750 |
| doyeon1   | 김대한    | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 |
| doyeon2   | 최민국    | A003         | 바나나1묶음      |   5000 |      0.05 |     12 |     57000 |
| doyeon2   | 최민국    | A004         | 사과5개          |  20000 |       0.1 |      2 |     36000 |
| doyeon2   | 최민국    | A006         | 두리안1KG        |  50000 |       0.3 |      1 |     35000 |
| doyeon3   | 박만세    | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 |
| doyeon4   | 이지원    | A002         | 계란1판          |   6000 |      0.25 |      1 |      4500 |
| doyeon5   | 김수현    | A001         | 딸기1KG          |  13000 |      0.15 |      3 |     33150 |
| doyeon5   | 김수현    | A005         | 키위3KG          |  25000 |       0.1 |      5 |    112500 |
| doyeon5   | 김수현    | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 |
+-----------+-----------+--------------+------------------+--------+-----------+--------+-----------+

-- 4개 테이블 연결

-- 회원테이블 ,상품테이블, 장바구니테이블, 배송지테이블
-- 테이블 4개를 연결(관계) 맺는 조인 실행(LEFT 또는 INNER)

-- 회원 PK 아이디
-- 상품 PK 상품코드
-- 배송지 PK 
-- 상품 FK 아이디, 상품코드

-- 장바구니에 담긴 아이디, 이름, 상품코드, 상품명, 정가, 수량,할인율, 판매가, 우편번호,주소,상세주소,기본배송지여부

SELECT 
`장바구니`.`아이디`,
`회원`.`이름`,
`장바구니`.`상품코드`,
`상품`.`상품명`,
`상품`.`정가`,
`상품`.`할인율`,
`장바구니`.`수량`,
((`상품`.`정가`*(1-`상품`.`할인율`))) * `장바구니`.`수량` AS `판매가`,
`배송지`.`우편번호`,
`배송지`.`주소`,
`배송지`.`상세주소`,
`배송지`.`기본배송지여부`
FROM `장바구니`

INNER JOIN `상품`
ON  `장바구니`.`상품코드` = `상품`.`상품코드`

INNER JOIN `회원`
ON  `장바구니`.`아이디` = `회원`.`아이디`

INNER JOIN `배송지`
ON  `장바구니`.`아이디` = `배송지`.`아이디`

WHERE `배송지`.`기본배송지여부`='YES';

+-----------+-----------+--------------+------------------+--------+-----------+--------+-----------+--------------+---------------------+---------------+-----------------------+
| 아이디    | 이름      | 상품코드     | 상품명           | 정가   | 할인율    | 수량   | 판매가    | 우편번호     | 주소                | 상세주소      | 기본배송지여부        |
+-----------+-----------+--------------+------------------+--------+-----------+--------+-----------+--------------+---------------------+---------------+-----------------------+
| doyeon1   | 김대한    | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 | 12357        | 서울시 강남구       | 강남로 671    | YES                   |
| doyeon1   | 김대한    | A003         | 바나나1묶음      |   5000 |      0.05 |      1 |      4750 | 12357        | 서울시 강남구       | 강남로 671    | YES                   |
| doyeon1   | 김대한    | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 | 12357        | 서울시 강남구       | 강남로 671    | YES                   |
| doyeon2   | 최민국    | A003         | 바나나1묶음      |   5000 |      0.05 |     12 |     57000 | 78123        | 경기도 안산시       | 강남로 951    | YES                   |
| doyeon2   | 최민국    | A004         | 사과5개          |  20000 |       0.1 |      2 |     36000 | 78123        | 경기도 안산시       | 강남로 951    | YES                   |
| doyeon2   | 최민국    | A006         | 두리안1KG        |  50000 |       0.3 |      1 |     35000 | 78123        | 경기도 안산시       | 강남로 951    | YES                   |
| doyeon3   | 박만세    | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 | 22351        | 서울시 강남구       | 강남로 871    | YES                   |
| doyeon4   | 이지원    | A002         | 계란1판          |   6000 |      0.25 |      1 |      4500 | 10357        | 서울시 서초구       | 서초로 571    | YES                   |
| doyeon5   | 김수현    | A001         | 딸기1KG          |  13000 |      0.15 |      3 |     33150 | 10358        | 서울시 강남구       | 강남로 650    | YES                   |
| doyeon5   | 김수현    | A005         | 키위3KG          |  25000 |       0.1 |      5 |    112500 | 10358        | 서울시 강남구       | 강남로 650    | YES                   |
| doyeon5   | 김수현    | A001         | 딸기1KG          |  13000 |      0.15 |      1 |     11050 | 10358        | 서울시 강남구       | 강남로 650    | YES                   |
+-----------+-----------+--------------+------------------+--------+-----------+--------+-----------+--------------+---------------------+---------------+-----------------------+

-- 장바구니에 담긴 아이디, 이름, 상품코드, 상품명, 정가, 수량,할인율, 판매가, 우편번호,주소,상세주소,기본배송지여부

SELECT 
`장바구니`.`아이디`,
`회원`.`이름`,
`장바구니`.`상품코드`,
`상품`.`상품명`,
`상품`.`정가`,
`상품`.`할인율`,
`장바구니`.`수량`,
((`상품`.`정가`*(1-`상품`.`할인율`))) * `장바구니`.`수량` AS `판매가`,
`배송지`.`우편번호`,
`배송지`.`주소`,
`배송지`.`상세주소`,
`배송지`.`기본배송지여부`
FROM `장바구니`

INNER JOIN `상품`
ON  `장바구니`.`상품코드` = `상품`.`상품코드`

INNER JOIN `회원`
ON  `장바구니`.`아이디` = `회원`.`아이디`

INNER JOIN `배송지`
ON  `장바구니`.`아이디` = `배송지`.`아이디`

WHERE `배송지`.`기본배송지여부`='YES' AND `회원`.`이름` = '김수현';

+-----------+-----------+--------------+-----------+--------+-----------+--------+-----------+--------------+---------------------+---------------+-----------------------+
| 아이디    | 이름      | 상품코드     | 상품명    | 정가   | 할인율    | 수량   | 판매가    | 우편번호     | 주소                | 상세주소      | 기본배송지여부        |
+-----------+-----------+--------------+-----------+--------+-----------+--------+-----------+--------------+---------------------+---------------+-----------------------+
| doyeon5   | 김수현    | A001         | 딸기1KG   |  13000 |      0.15 |      3 |     33150 | 10358        | 서울시 강남구       | 강남로 650    | YES                   |
| doyeon5   | 김수현    | A005         | 키위3KG   |  25000 |       0.1 |      5 |    112500 | 10358        | 서울시 강남구       | 강남로 650    | YES                   |
| doyeon5   | 김수현    | A001         | 딸기1KG   |  13000 |      0.15 |      1 |     11050 | 10358        | 서울시 강남구       | 강남로 650    | YES                   |
+-----------+-----------+--------------+-----------+--------+-----------+--------+-----------+--------------+---------------------+---------------+-----------------------+
```